{"version":3,"sources":["../src/effects/tweens/Easing.ts","../src/effects/tweens/Interpolation.ts","../src/effects/tweens/Tween.ts"],"names":["Easing","k","s","Interpolation","v","m","f","i","fn","b","n","pw","bn","p0","p1","t","fc","a","p2","p3","v0","v1","t2","t3","Tween","EC_TWEENS","temp","tween","value","prop","wait","elapsed","normalizedTime","curvedTime","interpolatedTime","type","twenToChain","repeatYoyo"],"mappings":"gFAAO,IAAMA,EAAS,CACrB,OAAQ,CACP,KAAOC,GACCA,CAET,EAEA,UAAW,CACV,GAAKA,GACGA,EAAIA,EAGZ,IAAMA,GACEA,GAAK,EAAIA,GAGjB,MAAQA,IACFA,GAAK,GAAK,EACP,GAAMA,EAAIA,EAEX,KAAQ,EAAEA,GAAKA,EAAI,GAAK,EAEjC,EAEA,MAAO,CACN,GAAKA,GACGA,EAAIA,EAAIA,EAGhB,IAAMA,GACE,EAAEA,EAAIA,EAAIA,EAAI,EAGtB,MAAQA,IACFA,GAAK,GAAK,EACP,GAAMA,EAAIA,EAAIA,EAEf,KAAQA,GAAK,GAAKA,EAAIA,EAAI,EAEnC,EAEA,QAAS,CACR,GAAKA,GACGA,EAAIA,EAAIA,EAAIA,EAGpB,IAAMA,GACE,GAAI,EAAEA,EAAIA,EAAIA,EAAIA,EAG1B,MAAQA,IACFA,GAAK,GAAK,EACP,GAAMA,EAAIA,EAAIA,EAAIA,EAEnB,MAASA,GAAK,GAAKA,EAAIA,EAAIA,EAAI,EAExC,EAEA,QAAS,CACR,GAAKA,GACGA,EAAIA,EAAIA,EAAIA,EAAIA,EAGxB,IAAMA,GACE,EAAEA,EAAIA,EAAIA,EAAIA,EAAIA,EAAI,EAG9B,MAAQA,IACFA,GAAK,GAAK,EACP,GAAMA,EAAIA,EAAIA,EAAIA,EAAIA,EAEvB,KAAQA,GAAK,GAAKA,EAAIA,EAAIA,EAAIA,EAAI,EAE3C,EAEA,WAAY,CACX,GAAKA,GACG,EAAI,KAAK,IAAKA,EAAI,KAAK,GAAM,CAAC,EAGtC,IAAMA,GACE,KAAK,IAAKA,EAAI,KAAK,GAAM,CAAC,EAGlC,MAAQA,GACA,IAAO,EAAI,KAAK,IAAI,KAAK,GAAKA,CAAC,EAExC,EAEA,YAAa,CACZ,GAAKA,GACGA,IAAM,EAAI,EAAI,KAAK,IAAI,KAAMA,EAAI,CAAC,EAG1C,IAAMA,GACEA,IAAM,EAAI,EAAI,EAAI,KAAK,IAAI,EAAG,IAAMA,CAAC,EAG7C,MAAQA,GACHA,IAAM,EACF,EAGJA,IAAM,EACF,GAGHA,GAAK,GAAK,EACP,GAAM,KAAK,IAAI,KAAMA,EAAI,CAAC,EAG3B,IAAO,CAAC,KAAK,IAAI,EAAG,KAAOA,EAAI,EAAE,EAAI,EAE9C,EAEA,SAAU,CACT,GAAKA,GACG,EAAI,KAAK,KAAK,EAAIA,EAAIA,CAAC,EAG/B,IAAMA,GACE,KAAK,KAAK,GAAI,EAAEA,EAAIA,CAAC,EAG7B,MAAQA,IACFA,GAAK,GAAK,EACP,KAAQ,KAAK,KAAK,EAAIA,EAAIA,CAAC,EAAI,GAEhC,IAAO,KAAK,KAAK,GAAKA,GAAK,GAAKA,CAAC,EAAI,EAE9C,EAEA,QAAS,CACR,GAAKA,GACAA,IAAM,EACF,EAGJA,IAAM,EACF,EAGD,CAAC,KAAK,IAAI,EAAG,IAAMA,EAAI,EAAE,EAAI,KAAK,KAAKA,EAAI,KAAO,EAAI,KAAK,EAAE,EAGrE,IAAMA,GACDA,IAAM,EACF,EAGJA,IAAM,EACF,EAGD,KAAK,IAAI,EAAG,IAAMA,CAAC,EAAI,KAAK,KAAKA,EAAI,IAAO,EAAI,KAAK,EAAE,EAAI,EAGnE,MAAQA,GACHA,IAAM,EACF,EAGJA,IAAM,EACF,GAGRA,GAAK,EAEDA,EAAI,EAEN,IAAO,KAAK,IAAI,EAAG,IAAMA,EAAI,EAAE,EAAI,KAAK,KAAKA,EAAI,KAAO,EAAI,KAAK,EAAE,EAKpE,GAAM,KAAK,IAAI,EAAG,KAAOA,EAAI,EAAE,EAAI,KAAK,KAAKA,EAAI,KAAO,EAAI,KAAK,EAAE,EAAI,EAG1E,EAEA,KAAM,CACL,GAAKA,GAEGA,EAAIA,GAAM,QAASA,EAAI,SAG/B,IAAMA,GAEE,EAAEA,EAAIA,GAAM,QAASA,EAAI,SAAK,EAGtC,MAAQA,GAAc,CACrB,IAAMC,EAAI,UACV,OAAKD,GAAK,GAAK,EACP,IAAOA,EAAIA,IAAMC,EAAI,GAAKD,EAAIC,IAG/B,KAAQD,GAAK,GAAKA,IAAMC,EAAI,GAAKD,EAAIC,GAAK,EAClD,CACD,EAEA,OAAQ,CACP,GAAKD,GACG,EAAID,EAAO,OAAO,IAAI,EAAIC,CAAC,EAGnC,IAAMA,GACDA,EAAI,mBACA,OAASA,EAAIA,EACVA,EAAI,kBACP,QAAUA,GAAK,mBAAcA,EAAI,IAC9BA,EAAI,kBACP,QAAUA,GAAK,mBAAeA,EAAI,MAElC,QAAUA,GAAK,mBAAgBA,EAAI,QAI5C,MAAQA,GACHA,EAAI,GACAD,EAAO,OAAO,GAAGC,EAAI,CAAC,EAAI,GAG3BD,EAAO,OAAO,IAAIC,EAAI,EAAI,CAAC,EAAI,GAAM,EAE9C,CACD,EClOO,IAAME,EAAgB,CAC5B,OAAQ,CAACC,EAAaH,IAAc,CACnC,IAAMI,EAAID,EAAE,OAAS,EACfE,EAAID,EAAIJ,EACRM,EAAI,KAAK,MAAMD,CAAC,EAChBE,EAAKL,EAAc,MAAM,OAE/B,OAAIF,EAAI,EACAO,EAAGJ,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGE,CAAC,EAGpBL,EAAI,EACAO,EAAGJ,EAAEC,CAAC,EAAGD,EAAEC,EAAI,CAAC,EAAGA,EAAIC,CAAC,EAGzBE,EAAGJ,EAAEG,CAAC,EAAGH,EAAEG,EAAI,EAAIF,EAAIA,EAAIE,EAAI,CAAC,EAAGD,EAAIC,CAAC,CAChD,EAEA,OAAQ,CAACH,EAAaH,IAAc,CACnC,IAAIQ,EAAI,EACFC,EAAIN,EAAE,OAAS,EACfO,EAAK,KAAK,IACVC,EAAKT,EAAc,MAAM,UAE/B,QAASI,EAAI,EAAGA,GAAKG,EAAGH,IACvBE,GAAKE,EAAG,EAAIV,EAAGS,EAAIH,CAAC,EAAII,EAAGV,EAAGM,CAAC,EAAIH,EAAEG,CAAC,EAAIK,EAAGF,EAAGH,CAAC,EAGlD,OAAOE,CACR,EAEA,WAAY,CAACL,EAAaH,IAAc,CACvC,IAAMI,EAAID,EAAE,OAAS,EACjBE,EAAID,EAAIJ,EACRM,EAAI,KAAK,MAAMD,CAAC,EACdE,EAAKL,EAAc,MAAM,WAE/B,OAAIC,EAAE,CAAC,IAAMA,EAAEC,CAAC,GACXJ,EAAI,IACPM,EAAI,KAAK,MAAOD,EAAID,GAAK,EAAIJ,EAAG,GAG1BO,EACNJ,GAAGG,EAAI,EAAIF,GAAKA,CAAC,EACjBD,EAAEG,CAAC,EACHH,GAAGG,EAAI,GAAKF,CAAC,EACbD,GAAGG,EAAI,GAAKF,CAAC,EACbC,EAAIC,CACL,GAEIN,EAAI,EACAG,EAAE,CAAC,GAAKI,EAAGJ,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAG,CAACE,CAAC,EAAIF,EAAE,CAAC,GAGhDH,EAAI,EACAG,EAAEC,CAAC,GAAKG,EAAGJ,EAAEC,CAAC,EAAGD,EAAEC,CAAC,EAAGD,EAAEC,EAAI,CAAC,EAAGD,EAAEC,EAAI,CAAC,EAAGC,EAAID,CAAC,EAAID,EAAEC,CAAC,GAGxDG,EACNJ,EAAEG,EAAIA,EAAI,EAAI,CAAC,EACfH,EAAEG,CAAC,EACHH,EAAEC,EAAIE,EAAI,EAAIF,EAAIE,EAAI,CAAC,EACvBH,EAAEC,EAAIE,EAAI,EAAIF,EAAIE,EAAI,CAAC,EACvBD,EAAIC,CACL,CAEF,EAEA,MAAO,CACN,OAAQ,CAACM,EAAYC,EAAYC,KACxBD,EAAKD,GAAME,EAAIF,EAGxB,UAAW,CAACH,EAAWH,IAAc,CACpC,IAAMS,EAAKb,EAAc,MAAM,UAC/B,OAAOa,EAAGN,CAAC,EAAIM,EAAGT,CAAC,EAAIS,EAAGN,EAAIH,CAAC,CAChC,EAEA,WAAY,IAAM,CACjB,IAAMU,EAAI,CAAC,CAAC,EAEZ,OAAQP,GAAc,CACrB,IAAIR,EAAI,EAER,GAAIe,EAAEP,CAAC,EACN,OAAOO,EAAEP,CAAC,EAGX,QAAS,EAAIA,EAAG,EAAI,EAAG,IACtBR,GAAK,EAGN,OAAAe,EAAEP,CAAC,EAAIR,EACAA,CACR,CACD,GAAG,EAEH,WAAY,CAACW,EAAYC,EAAYI,EAAYC,EAAYJ,IAAc,CAC1E,IAAMK,GAAMF,EAAKL,GAAM,GACjBQ,GAAMF,EAAKL,GAAM,GACjBQ,EAAKP,EAAIA,EACTQ,EAAKR,EAAIO,EAEf,OACE,EAAIR,EAAK,EAAII,EAAKE,EAAKC,GAAME,GAC7B,GAAKT,EAAK,EAAII,EAAK,EAAIE,EAAKC,GAAMC,EACnCF,EAAKL,EACLD,CAEF,CACD,CACD,EC1GO,IAAMU,EAAN,KAAY,CACV,MAA6B,CAAC,EAC9B,IAA2B,CAAC,EAC5B,SAAW,GACX,UAAoB,EACpB,OAAiB,EACjB,YAAqCxB,EAAO,OAAO,KACnD,mBACPG,EAAc,OAEP,OAA8B,CAAC,EAC/B,YAAwB,CAAC,EACzB,SAAmB,EAEnB,eAA0B,CAAC,EAC3B,MAAiB,GACjB,QAAkB,EAClB,aAAuB,EACvB,YAAuB,GAExB,WACA,QACA,SACA,OAEP,aAAc,CACbsB,EAAU,KAAK,IAAI,CACpB,CAEQ,KAAY,CACnB,IAAMC,EAAO,KAAK,MAKlB,GAJA,KAAK,SAAW,GAEhBD,EAAU,OAAOA,EAAU,QAAQ,IAAI,EAAG,CAAC,EAEvC,KAAK,MAAO,CACf,KAAK,KAAK,KAAK,GAAG,EAAE,GAAGC,CAAI,EAAE,MAAM,EACnC,OAGD,GAAI,KAAK,aAAe,KAAK,QAAS,CACjC,KAAK,YAAa,KAAK,KAAK,KAAK,GAAG,EAAE,GAAGA,CAAI,EAAE,MAAM,EACpD,KAAK,MAAM,EAEhB,KAAK,eACL,OAGG,KAAK,UAAU,KAAK,SAAS,KAAK,MAAM,EAExC,KAAK,YAAY,KAAK,WAAW,KAAK,MAAM,EAEhD,KAAK,eAAe,QAASC,GAAU,CACtCA,EAAM,MAAM,CACb,CAAC,CACF,CAEA,IAAI,SAAmB,CACtB,OAAO,KAAK,QACb,CAEO,KAAKC,EAAmC,CAC9C,YAAK,MAAQA,EACb,KAAK,YAAc,OAAO,KAAK,KAAK,KAAK,EAEzC,KAAK,YAAY,QAASC,GAAiB,CAC1C,KAAK,OAAOA,CAAI,EAAI,KAAK,MAAMA,CAAI,CACpC,CAAC,EAEM,IACR,CAEO,GAAGD,EAAmC,CAC5C,YAAK,IAAMA,EAEJ,IACR,CAEO,OAAc,CAChB,KAAK,UAAUH,EAAU,OAAOA,EAAU,QAAQ,IAAI,EAAG,CAAC,EAE9D,KAAK,SAAW,EAGhBK,EAAK,KAAK,MAAM,EAAE,KAAK,IAAM,CAC5B,KAAK,SAAW,GAChB,KAAK,YAAY,QAASD,GAAS,CAClC,KAAK,OAAOA,CAAI,EAAI,KAAK,MAAMA,CAAI,CACpC,CAAC,EAEDJ,EAAU,KAAK,IAAI,EAEf,KAAK,SAAW,MAAM,KAAK,QAAQ,KAAK,MAAM,CACnD,CAAC,CACF,CAEO,OAAOM,EAAuB,CACpC,GAAI,CAAC,KAAK,SAAU,OAcpB,GAHA,KAAK,UAAYA,EAGb,KAAK,SAAW,KAAK,UAAW,CACnC,KAAK,SAAW,EAChB,KAAK,YAAY,QAASF,GAAS,CAClC,GAAI,KAAK,IAAIA,CAAI,YAAa,MAAO,CACpC,KAAK,OAAOA,CAAI,EAAI,KAAK,IAAIA,CAAI,EAAE,KAAK,IAAIA,CAAI,EAAE,OAAS,CAAC,EAC5D,OAGD,KAAK,OAAOA,CAAI,EAAI,KAAK,IAAIA,CAAI,CAClC,CAAC,EAED,KAAK,IAAI,EACT,OAID,IAAMG,EAAiB,KAAK,SAAW,KAAK,UACtCC,EAAa,KAAK,YAAYD,CAAc,EAElD,KAAK,YAAY,QAASH,GAAS,CAClC,GAAI,KAAK,IAAIA,CAAI,YAAa,MAAO,CACpC,IAAMK,EAAmB,KAAK,mBAC7B,KAAK,IAAIL,CAAI,EACbI,CACD,EAEA,KAAK,OAAOJ,CAAI,EAAIK,EACpB,OAGD,KAAK,OAAOL,CAAI,EACf,KAAK,IAAIA,CAAI,EAAII,EAAa,KAAK,MAAMJ,CAAI,GAAK,EAAII,EACxD,CAAC,EAEG,KAAK,UAAU,KAAK,SAAS,KAAK,MAAM,CAC7C,CAEO,OAAOE,EAAoC,CACjD,YAAK,YAAcA,EAEZ,IACR,CAEO,cAAcA,EAAiD,CACrE,YAAK,mBAAqBA,EAEnB,IACR,CAEO,MAAa,CACnB,KAAK,SAAW,EACjB,CAEO,OAAc,CACpB,KAAK,SAAW,EACjB,CAEO,SAASC,EAA6B,CAC5C,YAAK,eAAiBA,EAEf,IACR,CAEO,KAAKR,EAAuB,CAClC,YAAK,MAAQA,EAEN,IACR,CAEO,OAAOA,EAAeS,EAA4B,CACxD,YAAK,QAAUT,EACf,KAAK,YAAcS,EAEZ,IACR,CAEO,MAAMT,EAAsB,CAClC,YAAK,OAASA,EAEP,IACR,CAEO,SAASA,EAAsB,CACrC,YAAK,UAAYA,EAEV,IACR,CACD","sourcesContent":["export const Easing = {\n\tLinear: {\n\t\tNone: (k: number) => {\n\t\t\treturn k;\n\t\t},\n\t},\n\n\tQuadratic: {\n\t\tIn: (k: number) => {\n\t\t\treturn k * k;\n\t\t},\n\n\t\tOut: (k: number) => {\n\t\t\treturn k * (2 - k);\n\t\t},\n\n\t\tInOut: (k: number) => {\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k;\n\t\t\t}\n\t\t\treturn -0.5 * (--k * (k - 2) - 1);\n\t\t},\n\t},\n\n\tCubic: {\n\t\tIn: (k: number) => {\n\t\t\treturn k * k * k;\n\t\t},\n\n\t\tOut: (k: number) => {\n\t\t\treturn --k * k * k + 1;\n\t\t},\n\n\t\tInOut: (k: number) => {\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k * k;\n\t\t\t}\n\t\t\treturn 0.5 * ((k -= 2) * k * k + 2);\n\t\t},\n\t},\n\n\tQuartic: {\n\t\tIn: (k: number) => {\n\t\t\treturn k * k * k * k;\n\t\t},\n\n\t\tOut: (k: number) => {\n\t\t\treturn 1 - --k * k * k * k;\n\t\t},\n\n\t\tInOut: (k: number) => {\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k * k * k;\n\t\t\t}\n\t\t\treturn -0.5 * ((k -= 2) * k * k * k - 2);\n\t\t},\n\t},\n\n\tQuintic: {\n\t\tIn: (k: number) => {\n\t\t\treturn k * k * k * k * k;\n\t\t},\n\n\t\tOut: (k: number) => {\n\t\t\treturn --k * k * k * k * k + 1;\n\t\t},\n\n\t\tInOut: (k: number) => {\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k * k * k * k;\n\t\t\t}\n\t\t\treturn 0.5 * ((k -= 2) * k * k * k * k + 2);\n\t\t},\n\t},\n\n\tSinusoidal: {\n\t\tIn: (k: number) => {\n\t\t\treturn 1 - Math.cos((k * Math.PI) / 2);\n\t\t},\n\n\t\tOut: (k: number) => {\n\t\t\treturn Math.sin((k * Math.PI) / 2);\n\t\t},\n\n\t\tInOut: (k: number) => {\n\t\t\treturn 0.5 * (1 - Math.cos(Math.PI * k));\n\t\t},\n\t},\n\n\tExponential: {\n\t\tIn: (k: number) => {\n\t\t\treturn k === 0 ? 0 : Math.pow(1024, k - 1);\n\t\t},\n\n\t\tOut: (k: number) => {\n\t\t\treturn k === 1 ? 1 : 1 - Math.pow(2, -10 * k);\n\t\t},\n\n\t\tInOut: (k: number) => {\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * Math.pow(1024, k - 1);\n\t\t\t}\n\n\t\t\treturn 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2);\n\t\t},\n\t},\n\n\tCircular: {\n\t\tIn: (k: number) => {\n\t\t\treturn 1 - Math.sqrt(1 - k * k);\n\t\t},\n\n\t\tOut: (k: number) => {\n\t\t\treturn Math.sqrt(1 - --k * k);\n\t\t},\n\n\t\tInOut: (k: number) => {\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn -0.5 * (Math.sqrt(1 - k * k) - 1);\n\t\t\t}\n\t\t\treturn 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\n\t\t},\n\t},\n\n\tElastic: {\n\t\tIn: (k: number) => {\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\treturn -Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\n\t\t},\n\n\t\tOut: (k: number) => {\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\treturn Math.pow(2, -10 * k) * Math.sin((k - 0.1) * 5 * Math.PI) + 1;\n\t\t},\n\n\t\tInOut: (k: number) => {\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\tk *= 2;\n\n\t\t\tif (k < 1) {\n\t\t\t\treturn (\n\t\t\t\t\t-0.5 * Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t0.5 * Math.pow(2, -10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI) + 1\n\t\t\t);\n\t\t},\n\t},\n\n\tBack: {\n\t\tIn: (k: number) => {\n\t\t\tconst s = 1.70158;\n\t\t\treturn k * k * ((s + 1) * k - s);\n\t\t},\n\n\t\tOut: (k: number) => {\n\t\t\tconst s = 1.70158;\n\t\t\treturn --k * k * ((s + 1) * k + s) + 1;\n\t\t},\n\n\t\tInOut: (k: number) => {\n\t\t\tconst s = 1.70158 * 1.525;\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * (k * k * ((s + 1) * k - s));\n\t\t\t}\n\n\t\t\treturn 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\n\t\t},\n\t},\n\n\tBounce: {\n\t\tIn: (k: number) => {\n\t\t\treturn 1 - Easing.Bounce.Out(1 - k);\n\t\t},\n\n\t\tOut: (k: number) => {\n\t\t\tif (k < 1 / 2.75) {\n\t\t\t\treturn 7.5625 * k * k;\n\t\t\t} else if (k < 2 / 2.75) {\n\t\t\t\treturn 7.5625 * (k -= 1.5 / 2.75) * k + 0.75;\n\t\t\t} else if (k < 2.5 / 2.75) {\n\t\t\t\treturn 7.5625 * (k -= 2.25 / 2.75) * k + 0.9375;\n\t\t\t} else {\n\t\t\t\treturn 7.5625 * (k -= 2.625 / 2.75) * k + 0.984375;\n\t\t\t}\n\t\t},\n\n\t\tInOut: (k: number) => {\n\t\t\tif (k < 0.5) {\n\t\t\t\treturn Easing.Bounce.In(k * 2) * 0.5;\n\t\t\t}\n\n\t\t\treturn Easing.Bounce.Out(k * 2 - 1) * 0.5 + 0.5;\n\t\t},\n\t},\n};\n","export const Interpolation = {\n\tLinear: (v: number[], k: number) => {\n\t\tconst m = v.length - 1;\n\t\tconst f = m * k;\n\t\tconst i = Math.floor(f);\n\t\tconst fn = Interpolation.Utils.Linear;\n\n\t\tif (k < 0) {\n\t\t\treturn fn(v[0], v[1], f);\n\t\t}\n\n\t\tif (k > 1) {\n\t\t\treturn fn(v[m], v[m - 1], m - f);\n\t\t}\n\n\t\treturn fn(v[i], v[i + 1 > m ? m : i + 1], f - i);\n\t},\n\n\tBezier: (v: number[], k: number) => {\n\t\tlet b = 0;\n\t\tconst n = v.length - 1;\n\t\tconst pw = Math.pow;\n\t\tconst bn = Interpolation.Utils.Bernstein;\n\n\t\tfor (let i = 0; i <= n; i++) {\n\t\t\tb += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i);\n\t\t}\n\n\t\treturn b;\n\t},\n\n\tCatmullRom: (v: number[], k: number) => {\n\t\tconst m = v.length - 1;\n\t\tlet f = m * k;\n\t\tlet i = Math.floor(f);\n\t\tconst fn = Interpolation.Utils.CatmullRom;\n\n\t\tif (v[0] === v[m]) {\n\t\t\tif (k < 0) {\n\t\t\t\ti = Math.floor((f = m * (1 + k)));\n\t\t\t}\n\n\t\t\treturn fn(\n\t\t\t\tv[(i - 1 + m) % m],\n\t\t\t\tv[i],\n\t\t\t\tv[(i + 1) % m],\n\t\t\t\tv[(i + 2) % m],\n\t\t\t\tf - i,\n\t\t\t);\n\t\t} else {\n\t\t\tif (k < 0) {\n\t\t\t\treturn v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]);\n\t\t\t}\n\n\t\t\tif (k > 1) {\n\t\t\t\treturn v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]);\n\t\t\t}\n\n\t\t\treturn fn(\n\t\t\t\tv[i ? i - 1 : 0],\n\t\t\t\tv[i],\n\t\t\t\tv[m < i + 1 ? m : i + 1],\n\t\t\t\tv[m < i + 2 ? m : i + 2],\n\t\t\t\tf - i,\n\t\t\t);\n\t\t}\n\t},\n\n\tUtils: {\n\t\tLinear: (p0: number, p1: number, t: number) => {\n\t\t\treturn (p1 - p0) * t + p0;\n\t\t},\n\n\t\tBernstein: (n: number, i: number) => {\n\t\t\tconst fc = Interpolation.Utils.Factorial;\n\t\t\treturn fc(n) / fc(i) / fc(n - i);\n\t\t},\n\n\t\tFactorial: (() => {\n\t\t\tconst a = [1];\n\n\t\t\treturn (n: number) => {\n\t\t\t\tlet s = 1;\n\n\t\t\t\tif (a[n]) {\n\t\t\t\t\treturn a[n];\n\t\t\t\t}\n\n\t\t\t\tfor (let i = n; i > 1; i--) {\n\t\t\t\t\ts *= i;\n\t\t\t\t}\n\n\t\t\t\ta[n] = s;\n\t\t\t\treturn s;\n\t\t\t};\n\t\t})(),\n\n\t\tCatmullRom: (p0: number, p1: number, p2: number, p3: number, t: number) => {\n\t\t\tconst v0 = (p2 - p0) * 0.5;\n\t\t\tconst v1 = (p3 - p1) * 0.5;\n\t\t\tconst t2 = t * t;\n\t\t\tconst t3 = t * t2;\n\n\t\t\treturn (\n\t\t\t\t(2 * p1 - 2 * p2 + v0 + v1) * t3 +\n\t\t\t\t(-3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 +\n\t\t\t\tv0 * t +\n\t\t\t\tp1\n\t\t\t);\n\t\t},\n\t},\n};\n","import { EC_TWEENS } from \"EngineConstants\";\nimport { Easing } from \"./Easing\";\nimport { Interpolation } from \"./Interpolation\";\nimport { wait } from \"inks2d/utils\";\n\nexport class Tween {\n\tprivate _from: Record<string, any> = {};\n\tprivate _to: Record<string, any> = {};\n\tprivate _playing = false;\n\tprivate _duration: number = 0;\n\tprivate _delay: number = 0;\n\tprivate _easingType: (k: number) => number = Easing.Linear.None;\n\tprivate _interpolationType: (v: number[], k: number) => number =\n\t\tInterpolation.Linear;\n\n\tprivate _props: Record<string, any> = {};\n\tprivate _properties: string[] = [];\n\tprivate _elapsed: number = 0;\n\t// private _last: number = 0;\n\tprivate _chainedTweens: Tween[] = [];\n\tprivate _yoyo: boolean = false;\n\tprivate _repeat: number = 0;\n\tprivate _repeatCount: number = 1;\n\tprivate _repeatYoyo: boolean = false;\n\n\tpublic onComplete?: (props: Record<string, any>) => void;\n\tpublic onStart?: (props: Record<string, any>) => void;\n\tpublic onUpdate?: (props: Record<string, any>) => void;\n\tpublic onStop?: (props: Record<string, any>) => void;\n\n\tconstructor() {\n\t\tEC_TWEENS.push(this);\n\t}\n\n\tprivate end(): void {\n\t\tconst temp = this._from;\n\t\tthis._playing = false;\n\n\t\tEC_TWEENS.splice(EC_TWEENS.indexOf(this), 1);\n\n\t\tif (this._yoyo) {\n\t\t\tthis.from(this._to).to(temp).start();\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._repeatCount < this._repeat) {\n\t\t\tif (this._repeatYoyo) this.from(this._to).to(temp).start();\n\t\t\telse this.start();\n\n\t\t\tthis._repeatCount++;\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.onUpdate) this.onUpdate(this._props);\n\n\t\tif (this.onComplete) this.onComplete(this._props);\n\n\t\tthis._chainedTweens.forEach((tween) => {\n\t\t\ttween.start();\n\t\t});\n\t}\n\n\tget playing(): boolean {\n\t\treturn this._playing;\n\t}\n\n\tpublic from(value: Record<string, any>): Tween {\n\t\tthis._from = value;\n\t\tthis._properties = Object.keys(this._from);\n\n\t\tthis._properties.forEach((prop: string) => {\n\t\t\tthis._props[prop] = this._from[prop];\n\t\t});\n\n\t\treturn this;\n\t}\n\n\tpublic to(value: Record<string, any>): Tween {\n\t\tthis._to = value;\n\n\t\treturn this;\n\t}\n\n\tpublic start(): void {\n\t\tif (this._playing) EC_TWEENS.splice(EC_TWEENS.indexOf(this), 1);\n\n\t\tthis._elapsed = 0;\n\t\t// this._last = 0;\n\n\t\twait(this._delay).then(() => {\n\t\t\tthis._playing = true;\n\t\t\tthis._properties.forEach((prop) => {\n\t\t\t\tthis._props[prop] = this._from[prop];\n\t\t\t});\n\n\t\t\tEC_TWEENS.push(this);\n\n\t\t\tif (this.onStart != null) this.onStart(this._props);\n\t\t});\n\t}\n\n\tpublic update(elapsed: number): void {\n\t\tif (!this._playing) return;\n\n\t\t/*\n\t\tconst now = Date.now();\n\n\t\tif (now - this._last >= 1000) {\n\t\t\tthis._last = now;\n\t\t}\n\t\t*/\n\n\t\t// this._elapsed += now - this._last;\n\t\tthis._elapsed += elapsed;\n\t\t// this._last = now;\n\n\t\tif (this._elapsed > this._duration) {\n\t\t\tthis._elapsed = 0;\n\t\t\tthis._properties.forEach((prop) => {\n\t\t\t\tif (this._to[prop] instanceof Array) {\n\t\t\t\t\tthis._props[prop] = this._to[prop][this._to[prop].length - 1];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis._props[prop] = this._to[prop];\n\t\t\t});\n\n\t\t\tthis.end();\n\t\t\treturn;\n\t\t}\n\n\t\t// this._last = now;\n\t\tconst normalizedTime = this._elapsed / this._duration;\n\t\tconst curvedTime = this._easingType(normalizedTime);\n\n\t\tthis._properties.forEach((prop) => {\n\t\t\tif (this._to[prop] instanceof Array) {\n\t\t\t\tconst interpolatedTime = this._interpolationType(\n\t\t\t\t\tthis._to[prop],\n\t\t\t\t\tcurvedTime,\n\t\t\t\t);\n\n\t\t\t\tthis._props[prop] = interpolatedTime;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._props[prop] =\n\t\t\t\tthis._to[prop] * curvedTime + this._from[prop] * (1 - curvedTime);\n\t\t});\n\n\t\tif (this.onUpdate) this.onUpdate(this._props);\n\t}\n\n\tpublic easing(type: (k: number) => number): Tween {\n\t\tthis._easingType = type;\n\n\t\treturn this;\n\t}\n\n\tpublic interpolation(type: (v: number[], k: number) => number): Tween {\n\t\tthis._interpolationType = type;\n\n\t\treturn this;\n\t}\n\n\tpublic play(): void {\n\t\tthis._playing = true;\n\t}\n\n\tpublic pause(): void {\n\t\tthis._playing = false;\n\t}\n\n\tpublic chain(...twenToChain: Tween[]): Tween {\n\t\tthis._chainedTweens = twenToChain;\n\n\t\treturn this;\n\t}\n\n\tpublic yoyo(value: boolean): Tween {\n\t\tthis._yoyo = value;\n\n\t\treturn this;\n\t}\n\n\tpublic repeat(value: number, repeatYoyo: boolean): Tween {\n\t\tthis._repeat = value;\n\t\tthis._repeatYoyo = repeatYoyo;\n\n\t\treturn this;\n\t}\n\n\tpublic delay(value: number): Tween {\n\t\tthis._delay = value;\n\n\t\treturn this;\n\t}\n\n\tpublic duration(value: number): Tween {\n\t\tthis._duration = value;\n\n\t\treturn this;\n\t}\n}\n"]}