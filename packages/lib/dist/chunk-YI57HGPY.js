import { g } from './chunk-6LMX6XHW.js';

var n=class extends g{_currentFrame=0;_source;_sourceX=0;_sourceY=0;_sourceWidth=0;_sourceHeight=0;_tilesetFrame={};constructor(t){if(super(),t instanceof Image)this.createFromImage(t);else if(t.frame)this.createFromAtlas(t);else if(t.image&&!t.data)this.createFromTileset(t);else if(t.image&&t.data)this.createFromTilesetFrames(t);else if(t instanceof Array)if(t[0]&&t[0].source)this.createFromAtlasFrames(t);else if(t[0]instanceof Image)this.createFromImages(t);else throw new Error(`The Image sources in ${JSON.stringify(t)} are not recognized`);else throw new Error(`The image source ${JSON.stringify(t)} is not recognized`)}get currentFrame(){return this._currentFrame}createFromImage(t){if(t instanceof Image)this._source=t,this._sourceX=0,this._sourceY=0,this.width=t.width,this.height=t.height,this._sourceWidth=t.width,this._sourceHeight=t.height;else throw new Error("source is not an image object")}createFromAtlas(t){this._tilesetFrame=t,this._source=this._tilesetFrame.source,this._sourceX=this._tilesetFrame.frame.x,this._sourceY=this._tilesetFrame.frame.y,this.width=this._tilesetFrame.frame.w,this.height=this._tilesetFrame.frame.h,this._sourceWidth=this._tilesetFrame.frame.w,this._sourceHeight=this._tilesetFrame.frame.h;}createFromTileset(t){if(t.image instanceof Image)this._source=t.image,this._sourceX=t.x,this._sourceY=t.y,this.width=t.width,this.height=t.height,this._sourceWidth=t.width,this._sourceHeight=t.height;else throw new Error("source.image is not an image object")}createFromTilesetFrames(t){if(t.image instanceof Image)this._source=t.image,this.frames=t.data,this._sourceX=this.frames[0][0],this._sourceY=this.frames[0][1],this.width=t.width,this.height=t.height,this._sourceWidth=t.width,this._sourceHeight=t.height;else throw new Error("source.image is not an image object")}createFromAtlasFrames(t){this.frames=t,this._source=t[0].source,this._sourceX=t[0].frame.x,this._sourceY=t[0].frame.y,this.width=t[0].frame.w,this.height=t[0].frame.h,this._sourceWidth=t[0].frame.w,this._sourceHeight=t[0].frame.h;}createFromImages(t){this.frames=t,this._source=t[0],this._sourceX=0,this._sourceY=0,this.width=t[0].width,this.height=t[0].height,this._sourceWidth=t[0].width,this._sourceHeight=t[0].height;}gotoAndStop(t){if(this.frames.length!==0){if(this.frames.length>0&&t<this.frames.length){this.frames[0]instanceof Array?(this._sourceX=this.frames[t][0],this._sourceY=this.frames[t][1]):this.frames[t].frame?(this._sourceX=this.frames[t].frame.x,this._sourceY=this.frames[t].frame.y,this._sourceWidth=this.frames[t].frame.w,this._sourceHeight=this.frames[t].frame.h,this.width=this.frames[t].frame.w,this.height=this.frames[t].frame.h):(this._source=this.frames[t],this._sourceX=0,this._sourceY=0,this.width=this._source.width,this.height=this._source.height,this._sourceWidth=this._source.width,this._sourceHeight=this._source.height),this._currentFrame=t;return}throw new Error(`Frame number ${t} does not exist`)}}render(t){t.drawImage(this._source,this._sourceX,this._sourceY,this._sourceWidth,this._sourceHeight,-this.width*this.pivot.x,-this.height*this.pivot.y,this.width,this.height);}};var o=class extends g{_framesPerRow;_frames=[];_loop=!0;_speed=0;_currentFrame=0;_currentAnim="";_frameInAnim=0;_complete=!1;_playing=!1;_animations={};_source;_sourceX=0;_sourceY=0;_sourceWidth;_sourceHeight;_elapsed=0;onAnimStart;onAnimUpdate;onAnimComplete;constructor(t,e,i){super(),this._source=t,this._framesPerRow=this._source.width/e,this._sourceWidth=e,this._sourceHeight=i,this.width=e,this.height=i,this.bounds.width=this.width,this.bounds.height=this.height;}get complete(){return this._complete}get animationName(){return this._currentAnim}get frame(){return this._currentFrame}set frame(t){this._sourceX=Math.floor(t%this._framesPerRow)*this._sourceWidth,this._sourceY=Math.floor(t/this._framesPerRow)*this._sourceHeight,this._currentFrame=t;}addAnimation(t,e,i,u){let s=[],h=typeof e;if(h==="string"){let m=e.split("-"),c=parseInt(m[0]),g=parseInt(m[1]);for(let a=c;a<=g;a++)s.push(a);}else h==="object"?s=e:h==="number"&&(s=[e]);this._animations[t]={frames:s,speed:i,loop:u};}play(t){this._animations[t]&&(this._frames=this._animations[t].frames,this._speed=this._animations[t].speed,this._loop=this._animations[t].loop,this._currentFrame=this._frames[0],this._currentAnim=t,this._frameInAnim=0,this._complete=!1,this._playing=!0,this.onAnimStart!=null&&this.onAnimStart(this._currentAnim,this._currentFrame));}pause(){this._playing=!1;}resume(){this._playing=!0;}render(t){this.updtFrame(this.customProperties.elapsed),t.drawImage(this._source,this._sourceX,this._sourceY,this._sourceWidth,this._sourceHeight,-this.width*this.pivot.x,-this.height*this.pivot.y,this.width,this.height);}updtFrame(t){this._frames.length===0||this._complete||!this._playing||(this._elapsed+=t,this._elapsed>=this._speed&&(this.frame=this._frames[this._frameInAnim++],this.onAnimUpdate!=null&&this.onAnimUpdate(this._currentAnim,this._currentFrame),this._frameInAnim>=this._frames.length&&(this._loop?this._frameInAnim=0:(this._complete=!0,this._playing=!1,this.onAnimComplete!=null&&this.onAnimComplete(this._currentAnim,this._currentFrame))),this._elapsed=0));}};

export { n as a, o as b };
//# sourceMappingURL=out.js.map
//# sourceMappingURL=chunk-YI57HGPY.js.map