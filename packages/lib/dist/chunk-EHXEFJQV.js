import { a as a$3 } from './chunk-YI57HGPY.js';
import { a as a$2 } from './chunk-7TAUG27C.js';
import { a } from './chunk-BW6TL2PK.js';
import { d as d$1, b } from './chunk-6LMX6XHW.js';
import { c, a as a$1 } from './chunk-JXTEU5XG.js';

var $={Android:()=>navigator.userAgent.match(/Android/i)!=null,iOS:()=>navigator.userAgent.match(/iPhone|iPad|iPod/i)!=null},X=async(e=0)=>await new Promise(function(t){setTimeout(t,e);}),Y=(e,t=10,i=16,s=!1)=>{let o=1,n=e.position.x,r=e.position.y,h=e.rotation,a=1,m=i/t;d$1.includes(e)||(d$1.push(e),e.customProperties._____updateShake=function(){s?f():c$1();});function c$1(){o<t&&(e.position.x=n,e.position.y=r,i-=m,e.position.x+=c(-i,i),e.position.y+=c(-i,i),o++),o>=t&&(e.position.x=n,e.position.y=r,d$1.splice(d$1.indexOf(e),1));}function f(){o<t&&(e.rotation=h,i-=m,e.rotation=i*a,o++,a*=-1),o>=t&&(e.rotation=h,d$1.splice(d$1.indexOf(e),1));}},G=e=>{e.customProperties.buttonProps={};let{buttonProps:t}=e.customProperties,i=e instanceof a$3;t.enabled=!0,t.state="up",t.action="",t.pressed=!1,t.hoverOver=!1,t._pointerId=void 0,t._____updateButton=s=>{let o=s.cursors,n=Array.from(o.keys());if(!e.visible||!t.enabled){t.state="up",t.action="";return}for(let r=n.length-1;r>=0;r--){let h=o.get(n[r]);if(!h)continue;let a$2=a(new a$1(h.x,h.y),e,!0);h.isUp&&(t._pointerId===n[r]||n.length===1)&&(t.state="up",i&&e.gotoAndStop(0),t._pointerId=void 0),a$2.hasContact?(t.state="over",i&&e.frames&&e.frames.length===3&&e.gotoAndStop(1),h.isDown&&(t.state="down",t._pointerId=n[r],i&&e.gotoAndStop(1),i&&e.frames.length===3&&e.gotoAndStop(2))):(t._pointerId===n[r]||n.length===1)&&(t.state="up",t.pressed=!1,i&&e.gotoAndStop(0),t._pointerId=void 0),t.state==="down"&&(t.pressed||(t.press&&t.press(void 0),t.pressed=!0,t.action="pressed")),t.state==="over"&&(t.pressed&&(t.release&&t.release(e),t.pressed=!1,t.action="released",h.tapped&&t.tap&&t.tap(e)),t.hoverOver||(t.over&&t.over(e),t.hoverOver=!0)),t.state==="up"&&(t.pressed&&(t.release&&t.release(e),t.pressed=!1,t.action="released"),t.hoverOver&&(t.out&&t.out(e),t.hoverOver=!1));}},b.push(e);},k=(...e)=>{e.forEach(t=>{t.parent!=null&&t.parent.removeChild(t);});},T=(e,t,i,s,o)=>({image:e,x:t,y:i,width:s,height:o}),K=(e,t,i,s)=>({image:e,data:t,width:i,height:s}),U=(e,t,i=!1,s)=>{let o=t.x,n=t.y,r=t.width,h=t.height,a;return e.position.x<o&&(i&&(e.velocity.x*=-1),e.mass&&(e.velocity.x/=e.mass),e.position.x=o,a="left"),e.position.y<n&&(i&&(e.velocity.y*=-1),e.mass&&(e.velocity.y/=e.mass),e.position.y=n,a="top"),e.position.x>r&&(i&&(e.velocity.x*=-1),e.mass&&(e.velocity.x/=e.mass),e.position.x=r,a="right"),e.position.y>h&&(i&&(e.velocity.y*=-1),e.mass&&(e.velocity.y/=e.mass),e.position.y=h,a="bottom"),a&&s&&s(a),a},q=(e,t=0,i=0,s=32,o=32)=>{let n=t*i,r=[];for(let h=0;h<n;h++)r.push([]);return e.forEach(h=>{let a=d(h.position.clone(),s,o,t);r[a].push(h);}),r},z=(...e)=>{e.forEach(t=>{t.position=t.position.add(t.velocity);});},F=(e,t=!1,i=!1)=>{let s,o;o=e/1e3,t&&(s=Math.floor(o/3600),o=o%3600);let n=Math.floor(o/60);o=Math.floor(o%60);let r="";s&&(r=s>=10?`${s}`:s>0?`0${s}`:"00");let h=n>=10?n:n>0?`0${n}`:"00",a=o>=10?o:o>0?`0${o}`:"00",m=t?`${r?.toString()} : `:"";return m+=`${h} : ${a}`,i&&(m=m.split(" ").join("")),m};var v=class extends a$2{_tiledMap;_tileset;_tileWidth;_tileHeight;_mapWidth;_mapHeight;_mapWidthInTiles;_mapHeightInTiles;_spacing;_objects=[];constructor(t,i){super(),this._tiledMap=t,this._tileset=i,this._tileWidth=this._tiledMap.tilewidth,this._tileHeight=this._tiledMap.tileheight,this._mapWidth=this._tiledMap.width*this._tiledMap.tilewidth,this._mapHeight=this._tiledMap.height*this._tiledMap.tileheight,this._mapWidthInTiles=this._tiledMap.width,this._mapHeightInTiles=this._tiledMap.height,this._spacing=this._tiledMap.tilesets[0].spacing;let s=Math.floor(this._tiledMap.tilesets[0].imagewidth/this._tiledMap.tilewidth+this._spacing);this._tiledMap.layers.forEach(o=>{let n=new a$2;n.alpha=o.opacity,n.visible=o.visible,n.customProperties.name=o.name,n.customProperties.data=o.data,n.position.set(o.x,o.y),n.renderOutside=!0,this._objects.push(n),this.addChild(n),o.type==="tilelayer"&&o.data.forEach((r,h)=>{if(r===0)return;let a,m,c=h%this._mapWidthInTiles,f=Math.floor(h/this._mapWidthInTiles),y=c*this._tileWidth,W=f*this._tileHeight,j=(r-1)%s,E=Math.floor((r-1)/s);a=j*this._tileWidth,m=E*this._tileHeight,this._spacing>0&&(a+=this._spacing+this._spacing*((r-1)%s),m+=this._spacing+this._spacing*Math.floor((r-1)/s));let D=T(this._tileset,a,m,this._tileWidth,this._tileHeight),b=this._tiledMap.tilesets[0].tileproperties,_=String(r-1),p=new a$3(D);b[_].name&&(Object.keys(b[_]).forEach(M=>{p.customProperties[M]=b[_][M];}),this._objects.push(p)),p.position.set(y,W),p.pivot.set(0,0),p.customProperties.index=h,p.customProperties.gid=r,n.addChild(p);}),o.type==="objectgroup"&&o.objects.forEach(r=>{r.group=n,this._objects.push(r);});});}get mapWidth(){return this._mapWidth}get mapHeight(){return this._mapHeight}get mapWidthInTiles(){return this._mapWidthInTiles}get mapHeightInTiles(){return this._mapHeightInTiles}get tileWidth(){return this._tileWidth}get tileHeight(){return this._tileHeight}getObject(t){let i=this._objects.find(s=>s.name&&s.name===t||s.customProperties.name&&s.customProperties.name===t);if(i)return i;throw new Error(`There is no object with the property name: ${t}`)}getObjects(t){let i=this._objects.filter(s=>s.name&&s.name===t||s.customProperties.name&&s.customProperties.name===t);if(i)return i;throw new Error(`There is no object with the property name: ${t}`)}updateMap(t,i){let s=t.map(n=>(n=0,n));if(i instanceof Array)return i.forEach(n=>{n.customProperties.index=d(new a$1(n.localCenterX,n.localCenterY),this.tileWidth,this.tileHeight,this.mapWidthInTiles),s[n.customProperties.index]=n.customProperties.gid;}),s;let o=i;return o.customProperties.index=d(new a$1(o.localCenterX,o.localCenterY),this.tileWidth,this.tileHeight,this.mapWidthInTiles),s[o.customProperties.index]=o.customProperties.gid,s}hitTestTile(t,i,s,o="some"){let n={},r=P(t),h=m=>{let c=r[m];return n.index=d(c,this.tileWidth,this.tileHeight,this.mapWidthInTiles),n.gid=i[n.index],n.gid===s},a=o==="center"?"some":o;return o==="center"&&(r={center:new a$1(t.localCenterX,t.localCenterY)}),n.hasContact=Object.keys(r)[a](h),n}};var I=class{scale=new a$1;width=0;height=0;_map;_x=0;_y=0;constructor(t,i){this.width=i.width,this.height=i.height,this._map=t;}get x(){return this._x}set x(t){this._x=t,this._map.position.x=-this._x;}get y(){return this._y}set y(t){this._y=t,this._map.position.y=-this._y;}get rightInnerBoundary(){return this._x+this.width/2+this.width/4}get leftInnerBoundary(){return this._x+this.width/2-this.width/4}get topInnerBoundary(){return this._y+this.height/2-this.height/4}get bottomInnerBoundary(){return this._y+this.height/2+this.height/4}follow(t){t.position.x<this.leftInnerBoundary&&(this.x=t.position.x-this.width/4),t.position.y<this.topInnerBoundary&&(this.y=t.position.y-this.height/4),t.position.x+t.width>this.rightInnerBoundary&&(this.x=t.position.x+t.width-this.width/4*3),t.position.y+t.height>this.bottomInnerBoundary&&(this.y=t.position.y+t.height-this.height/4*3),this.x<0&&(this.x=0),this.y<0&&(this.y=0),this.x+this.width>this._map.mapWidth&&(this.x=this._map.mapWidth-this.width),this.y+this.height>this._map.mapHeight&&(this.y=this._map.mapHeight-this.height);}centerOver(t){this.x=t.position.x+t.halfWidth-this.width/2,this.y=t.position.y+t.halfHeight-this.height/2,this.x<0&&(this.x=0),this.y<0&&(this.y=0),this.x+this.width>this._map.mapWidth&&(this.x=this._map.mapWidth-this.width),this.y+this.height>this._map.mapHeight&&(this.y=this._map.mapHeight-this.height);}};var d=(e,t,i,s)=>{let o=new a$1;return o.x=Math.floor(e.x/t),o.y=Math.floor(e.y/i),o.x+o.y*s},P=(e,t=!1)=>{let i=t?e.localBounds():e.globalBounds();return {topLeft:new a$1(i.x,i.y),topRight:new a$1(i.x+i.width-1,i.y),bottomLeft:new a$1(i.x,i.y+i.height-1),bottomRight:new a$1(i.x+i.width-1,i.y+i.height-1)}},nt=(e,t,i,s="some",o,n,r)=>{let h={},a=P(e),m=f=>{let y=a[f];return h.index=d(y,o,n,r),h.gid=t[h.index],h.gid===i},c=s==="center"?"some":s;return s==="center"&&(a={center:new a$1(e.localCenterX,e.localCenterY)}),h.hasContact=Object.keys(a)[c](m),h};

export { v as a, I as b, d as c, P as d, nt as e, $ as f, X as g, Y as h, G as i, k as j, T as k, K as l, U as m, q as n, z as o, F as p };
//# sourceMappingURL=out.js.map
//# sourceMappingURL=chunk-EHXEFJQV.js.map